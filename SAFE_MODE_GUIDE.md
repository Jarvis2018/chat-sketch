# 安全模式使用指南

## 什么是安全模式？

安全模式是一个**完全稳定**的转换模式，通过只使用最基础的 Sketch API 来避免崩溃。

## 为什么需要安全模式？

经过大量测试发现，Sketch 的样式 API 在处理 html2sketch 生成的复杂数据时非常不稳定，即使是简单的设计也会导致崩溃。安全模式通过避免所有复杂的样式设置来确保 100% 的稳定性。

## 安全模式 vs 普通模式

| 特性 | 安全模式 ✅ | 普通模式 ❌ |
|------|-----------|-----------|
| 稳定性 | 完全稳定，不会崩溃 | 经常崩溃 |
| 布局结构 | ✅ 完整 | ✅ 完整 |
| 文本内容 | ✅ 完整 | ✅ 完整 |
| 文本字号 | ✅ 有 | ✅ 有 |
| 基本颜色 | ✅ 有 | ✅ 有 |
| 圆角 | ❌ 无 | ✅ 有（可能崩溃）|
| 阴影 | ❌ 无 | ✅ 有（可能崩溃）|
| 边框 | ❌ 无 | ✅ 有（可能崩溃）|
| 渐变 | ❌ 无（变纯色）| ✅ 有（可能崩溃）|
| SVG 图标 | ❌ 无（变矩形）| ✅ 有（可能崩溃）|

## 推荐工作流程

### 1. 用插件生成基础结构

**描述你的设计**:
```
创建一个登录页面，包含：
- 顶部标题 "欢迎回来"
- 用户名输入框
- 密码输入框
- 登录按钮
- 底部提示文字
```

**点击"转换为 Sketch"**:
- 看到消息: "✅ 设计已创建（安全模式）"
- 在 Sketch 中看到基础的布局结构

### 2. 在 Sketch 中完善样式

生成的图层会很简单，但布局和文本都是正确的。现在你可以快速添加样式：

#### 添加圆角
1. 选中矩形图层（输入框、按钮等）
2. 在右侧面板找到 "Radius"
3. 设置圆角值（如 8px）

#### 添加阴影
1. 选中图层
2. 在右侧面板找到 "Shadows"
3. 点击 "+" 添加阴影
4. 调整参数（X: 0, Y: 2, Blur: 8, Color: rgba(0,0,0,0.1)）

#### 替换图标
1. 删除灰色矩形占位符
2. 插入真实的 SVG 图标
3. 调整位置和大小

#### 添加渐变
1. 选中图层
2. 在 "Fills" 中选择 "Gradient"
3. 设置渐变颜色和方向

### 3. 享受快速迭代

因为安全模式完全稳定，你可以：
- ✅ 多次生成不同的设计
- ✅ 快速尝试不同的布局
- ✅ 不用担心崩溃
- ✅ 专注于设计本身

## 实际案例

### 案例 1: 登录页面

**提示词**:
```
创建一个简洁的登录页面：
- 顶部 logo 占位（100x100）
- 标题 "登录"
- 用户名输入框，placeholder "请输入用户名"
- 密码输入框，placeholder "请输入密码"
- 蓝色登录按钮
- 底部灰色文字 "还没有账号？立即注册"
```

**生成结果**:
- ✅ 所有元素的位置正确
- ✅ 文本内容正确
- ✅ 基本的颜色（蓝色按钮、灰色文字）
- ❌ 没有圆角（需要手动添加）
- ❌ 没有阴影（需要手动添加）
- ❌ Logo 是灰色矩形（需要替换）

**手动完善** (5 分钟):
1. 给输入框和按钮添加 8px 圆角
2. 给按钮添加轻微阴影
3. 替换 logo 占位符为真实 logo
4. 调整间距和对齐

**总耗时**: 生成 30 秒 + 完善 5 分钟 = **5.5 分钟**

**对比手动**: 完全手动创建需要 15-20 分钟

### 案例 2: 产品卡片

**提示词**:
```
创建一个产品卡片：
- 顶部产品图片占位（335x200）
- 产品标题 "无线蓝牙耳机"
- 价格 "¥299"，红色
- 简短描述 "高品质音质，长续航"
- 底部橙色购买按钮
```

**生成结果**:
- ✅ 卡片布局正确
- ✅ 所有文本内容正确
- ✅ 价格是红色
- ✅ 按钮是橙色
- ❌ 卡片没有圆角和阴影
- ❌ 图片是灰色占位符

**手动完善** (3 分钟):
1. 给整个卡片添加 12px 圆角和阴影
2. 给按钮添加 8px 圆角
3. 替换图片占位符为真实产品图
4. 微调文字间距

**总耗时**: 生成 30 秒 + 完善 3 分钟 = **3.5 分钟**

## 提示词技巧

### ✅ 好的提示词

**清晰的结构描述**:
```
创建一个设置页面，包含：
- 顶部导航栏，标题 "设置"
- 个人信息区域：头像、用户名、编辑按钮
- 设置选项列表：
  - 账号安全
  - 隐私设置
  - 通知管理
  - 关于我们
- 底部退出登录按钮（红色）
```

**明确的颜色和尺寸**:
```
创建一个按钮组：
- 主按钮：蓝色背景，白色文字 "确认"
- 次要按钮：灰色背景，深灰文字 "取消"
- 按钮宽度 150px，高度 44px
```

### ❌ 避免的提示词

**过于复杂**:
```
创建一个完整的电商首页，包含轮播图、分类导航、
热门商品、限时秒杀、品牌推荐、用户评价、底部导航...
```
→ 太复杂，拆分成多个小部分

**过于模糊**:
```
创建一个好看的页面
```
→ 不够具体，AI 不知道要创建什么

**过度依赖样式**:
```
创建一个带有渐变背景、毛玻璃效果、3D 阴影的卡片
```
→ 安全模式不支持复杂样式，这些需要手动添加

## 常见问题

### Q: 为什么我的设计没有圆角和阴影？

A: 这是安全模式的设计。为了确保 100% 稳定性，安全模式只创建最基础的图层。圆角和阴影需要在 Sketch 中手动添加，这只需要几秒钟。

### Q: SVG 图标为什么变成了灰色矩形？

A: SVG 导入是导致崩溃的主要原因之一。安全模式会将 SVG 替换为占位符矩形。你可以在 Sketch 中删除这些矩形，然后插入真实的图标。

### Q: 可以关闭安全模式吗？

A: 可以，但不推荐。修改 `src/handler.js` 中的 `USE_SAFE_MODE = false`，然后重新构建。但是普通模式会经常崩溃，特别是在处理复杂设计或多次转换时。

### Q: 安全模式生成的图层太简单了，有用吗？

A: 非常有用！安全模式帮你完成了最耗时的部分：
- ✅ 布局结构（最难的部分）
- ✅ 文本内容（避免手动输入）
- ✅ 基本颜色（节省时间）
- ✅ 正确的尺寸和位置

添加圆角、阴影等样式只需要几分钟，但手动创建整个布局可能需要 15-30 分钟。

### Q: 为什么不能直接生成完美的设计？

A: 这是 Sketch API 的限制，不是插件的问题。Sketch 的样式 API 在处理程序生成的复杂数据时非常不稳定。我们尝试了很多方法，最终发现只有使用最基础的 API 才能保证稳定性。

### Q: 未来会改进吗？

A: 可能性不大。这是 Sketch 底层 API 的问题。除非 Sketch 官方改进 API 的稳定性，否则安全模式是最可靠的方案。

好消息是，安全模式已经能节省大量时间，而且完全稳定可靠。

## 最佳实践

### 1. 把插件当作快速原型工具

- ✅ 用它快速生成布局结构
- ✅ 用它尝试不同的设计方案
- ✅ 用它生成重复的元素（列表项、卡片等）
- ❌ 不要期望生成完美的最终设计

### 2. 分步骤工作

**步骤 1**: 用插件生成基础结构（30 秒）  
**步骤 2**: 在 Sketch 中添加样式（3-5 分钟）  
**步骤 3**: 微调和完善（5-10 分钟）

总时间：10-15 分钟  
对比完全手动：30-45 分钟

**节省时间：50-60%**

### 3. 利用多次迭代

因为安全模式完全稳定，你可以：
- 生成多个版本对比
- 快速尝试不同的布局
- 不用担心崩溃和数据丢失

### 4. 建立自己的工作流程

找到最适合你的方式：
- 有人喜欢先生成所有页面，再统一添加样式
- 有人喜欢生成一个页面，完善一个页面
- 有人喜欢只用插件生成复杂的列表和表单

## 总结

安全模式的核心理念：

> **用 AI 快速生成布局结构，用人工完善视觉样式**

这样既能利用 AI 的效率，又能保持设计的质量和稳定性。

**记住**:
- ✅ 安全模式 = 100% 稳定
- ✅ 生成基础结构 = 节省 50-60% 时间
- ✅ 手动添加样式 = 保持设计质量
- ✅ 多次迭代 = 快速探索设计方案

祝你设计愉快！🎨
